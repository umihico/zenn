---
title: "Claude Codeã‚’24æ™‚é–“å‹•ã‹ã™æŠ€è¡“"
emoji: "ğŸŸ¢"
type: "tech"
topics: ["claude", "claudecode", "ai", "tmux", "rspec"]
published: true
publication_name: "studio_prairie"
---

# Claude Codeã‚’24æ™‚é–“å‹•ã‹ã™æŠ€è¡“

## ãã£ã‹ã‘ãƒ»èƒŒæ™¯ãƒ»èª²é¡Œ

ãƒªãƒ•ã‚¡ã‚¯ã‚¿ã¯ä½œæ¥­è‡ªä½“ã¯Claude Codeã‚’ã¯ã˜ã‚AIãŒå¾—æ„ã¨ã™ã‚‹ä½œæ¥­ã§ã™ãŒã€å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«æ•°ãŒæ•°ç™¾ã‚ã‚‹ã¨ã€é€šå¸¸ã®Claude Codeã®å®Ÿè¡Œã§ã¯ã€ä½œæ¥­ãŒé€”ä¸­ã§åœæ­¢ã—ã¦ã—ã¾ã†ã¨ã„ã†å•é¡ŒãŒã‚ã‚Šã¾ã—ãŸã€‚ãã®å•é¡Œã‚’è§£æ±ºã™ã‚‹ãŸã‚ã€tmuxã¨Pythonã‚’çµ„ã¿åˆã‚ã›ã¦ã€ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’æ°¸ç¶šåŒ–ã—ã€åœæ­¢ã—ãŸã‚‰è‡ªå‹•å†èµ·å‹•ã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ›¸ãã¾ã—ãŸã€‚ä»Šå›ã€Railsã®ãƒ†ã‚¹ãƒˆRspecã®å¤§è¦æ¨¡ãªãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã‚’è¡ŒãŠã†ã¨æ€ã„ã¾ã—ãŸã€‚ãƒªãƒ•ã‚¡ã‚¯ã‚¿ã®å†…å®¹ã¯ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ï¼‘ã«å¯¾ã—ã¦ï¼‘ãƒ•ã‚¡ã‚¤ãƒ«ã«ã—ã¦ã„ã¾ã™ãŒã€ã“ã‚Œã‚’ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã”ã¨ã«ãƒ†ã‚¹ãƒˆå´ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ†å‰²ã™ã‚‹ä½œæ¥­ã§ã™ã€‚

## å®Ÿè£…ã®ãƒã‚¤ãƒ³ãƒˆ

1. tmuxã‚»ãƒƒã‚·ãƒ§ãƒ³ã§Claude Codeã‚’å®Ÿè¡Œ
2. Pythonã‚¹ã‚¯ãƒªãƒ—ãƒˆã§å‡ºåŠ›ã‚’ç›£è¦–ã—ã€å¤‰æ›´ãŒãªã‘ã‚Œã°è‡ªå‹•å†èµ·å‹•
3. ã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆã‹ã‚‰é †æ¬¡å‡¦ç†ã—ã€å‡¦ç†æ¸ˆã¿ã‚¿ã‚¹ã‚¯ã‚’è‡ªå‹•å‰Šé™¤
4. ä¸¦åˆ—å®Ÿè¡Œã«ã‚ˆã‚‹åŠ¹ç‡åŒ–

## å…¨ä½“ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

`clauder`ã¨ã„ã†ã‚³ãƒãƒ³ãƒ‰ã‚’è‡ªä½œã—ã¦ã€ä»¥ä¸‹ã®æµã‚Œã§å‹•ä½œã—ã¾ã™ï¼š

1. **ãƒ¦ãƒ¼ã‚¶ãƒ¼** ãŒ `clauder` ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œ
2. **.zshrcå†…ã®clauderé–¢æ•°** ãŒ SESSION_NAME ã¨ COMMAND_FILE_PATH ã‚’å—ã‘å–ã£ã¦ Pythonã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’èµ·å‹•
3. **.repeat_tmux.pyï¼ˆç›£è¦–ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼‰** ãŒä»¥ä¸‹ã‚’å®Ÿè¡Œï¼š
   - tmuxã‚»ãƒƒã‚·ãƒ§ãƒ³ã®ç®¡ç†
   - 5ç§’ã”ã¨ã®å‡ºåŠ›å·®åˆ†ç›£è¦–
   - å¤‰æ›´ãŒãªã„å ´åˆã®è‡ªå‹•å†èµ·å‹•
4. **tmuxã‚»ãƒƒã‚·ãƒ§ãƒ³å†…ã§Claude Code** ãŒå®Ÿè¡Œã•ã‚Œï¼š
   - order.txtã®æŒ‡ç¤ºã‚’èª­ã¿å–ã‚Š
   - tasks.txtã‹ã‚‰1è¡Œç›®ã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã‚’å–å¾—
   - RSpecãƒ•ã‚¡ã‚¤ãƒ«ã®åˆ†å‰²å‡¦ç†ã‚’å®Ÿè¡Œ
5. ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã§ç®¡ç†ã•ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿ï¼š
   - tasks.txt: å‡¦ç†å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒªã‚¹ãƒˆ
   - order.txt: AIã¸ã®å‡¦ç†æŒ‡ç¤ºæ›¸
   - spec/requests/: åˆ†å‰²å¯¾è±¡ã®RSpecãƒ•ã‚¡ã‚¤ãƒ«ç¾¤

## å®Ÿè£…ã®è©³ç´°

### 1. .zshrc - clauderé–¢æ•°ã®å®šç¾©

```bash
function clauder() {
  local SESSION_NAME=$1
  local COMMAND_FILE_PATH=$2
  python ~/.repeat_tmux.py $SESSION_NAME $COMMAND_FILE_PATH
}
```

ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ©ãƒƒãƒ‘ãƒ¼é–¢æ•°ã¨ã—ã¦å®šç¾©ã—ã€Pythonã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å‘¼ã³å‡ºã—ã¾ã™ã€‚

### 2. .repeat_tmux.py - ç›£è¦–ã¨è‡ªå‹•å†èµ·å‹•ã®å®Ÿè£…

å¾Œã»ã©è¦ç‚¹ã‚’è§£èª¬ã—ã¾ã™ãŒå…ˆã«ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸­èº«ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚

```python
#!/usr/bin/env python3
import subprocess
import time
import os
import tempfile
import difflib
import argparse


def kill_tmux_session(session_name):
    """æŒ‡å®šã•ã‚ŒãŸtmuxã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’killã™ã‚‹"""
    try:
        # æŒ‡å®šã•ã‚ŒãŸã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒå­˜åœ¨ã™ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
        result = subprocess.run(["tmux", "has-session", "-t", session_name],
                                capture_output=True, text=True)
        if result.returncode == 0:
            # ã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒå­˜åœ¨ã™ã‚‹å ´åˆã®ã¿kill
            subprocess.run(["tmux", "kill-session", "-t",
                           session_name], check=True)
            print(f"tmuxã‚»ãƒƒã‚·ãƒ§ãƒ³ '{session_name}' ã‚’killã—ã¾ã—ãŸ")
        else:
            print(f"tmuxã‚»ãƒƒã‚·ãƒ§ãƒ³ '{session_name}' ã¯å­˜åœ¨ã—ã¾ã›ã‚“")
    except subprocess.CalledProcessError as e:
        print(f"tmuxã‚»ãƒƒã‚·ãƒ§ãƒ³ '{session_name}' ã®killä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: {e}")
    except Exception as e:
        print(f"äºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: {e}")


def start_new_tmux_session(session_name, command_file_path):
    """æ–°ã—ã„tmuxã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’èµ·å‹•ã—ã€æŒ‡å®šã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ã‚’claudeã‚³ãƒãƒ³ãƒ‰ã§å®Ÿè¡Œã™ã‚‹"""
    try:
        # ãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ã‚’èª­ã¿è¾¼ã¿
        message = f"{command_file_path}ã‚’èª­ã¿è¾¼ã‚“ã§ã€æŒ‡ç¤ºã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚"

        # æ–°ã—ã„tmuxã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’èµ·å‹•ã—ã€claudeã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œ
        claude_command = f'claude "{message}"'
        subprocess.run(["tmux", "new-session", "-d", "-s", session_name,
                       claude_command], check=True)
        time.sleep(10)  # èµ·å‹•ã«æ™‚é–“ã‚‚ã‹ã‹ã‚Šå·®åˆ†ãªã—ã®åˆ¤å®šé˜²æ­¢
        print(
            f"æ–°ã—ã„tmuxã‚»ãƒƒã‚·ãƒ§ãƒ³ '{session_name}' ã‚’èµ·å‹•ã—ã€claudeã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã—ãŸ: {claude_command}")
    except FileNotFoundError:
        print(f"ãƒ•ã‚¡ã‚¤ãƒ« '{command_file_path}' ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“")
        raise
    except Exception as e:
        print(f"tmuxã‚»ãƒƒã‚·ãƒ§ãƒ³ '{session_name}' ã®èµ·å‹•ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: {e}")
        raise


def capture_tmux_pane(session_name):
    """æŒ‡å®šã•ã‚ŒãŸtmuxã‚»ãƒƒã‚·ãƒ§ãƒ³ã®ãƒšã‚¤ãƒ³ã®å†…å®¹ã‚’ã‚­ãƒ£ãƒ—ãƒãƒ£ã—ã¦è¿”ã™"""
    try:
        result = subprocess.run(
            ["tmux", "capture-pane", "-t", f"{session_name}:0.0", "-p"],
            capture_output=True,
            text=True
        )
        return result.stdout
    except Exception as e:
        print(f"ãƒšã‚¤ãƒ³ã®ã‚­ãƒ£ãƒ—ãƒãƒ£ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: {e}")
        return None


def get_diff_content(previous_content, current_content):
    """å‰å›ã®å†…å®¹ã¨ç¾åœ¨ã®å†…å®¹ã®å·®åˆ†ã‚’å–å¾—ã—ã€è¡Œæ•°ã‚‚è¿”ã™"""
    try:
        if previous_content is None:
            return "åˆå›å®Ÿè¡Œã®ãŸã‚å·®åˆ†ãªã—", 0

        # å‰å›ã®å†…å®¹ã¨ç¾åœ¨ã®å†…å®¹ã‚’è¡Œã«åˆ†å‰²
        previous_lines = previous_content.splitlines(keepends=True)
        current_lines = current_content.splitlines(keepends=True)

        # difflibã‚’ä½¿ç”¨ã—ã¦å·®åˆ†ã‚’ç”Ÿæˆ
        diff = difflib.unified_diff(
            previous_lines,
            current_lines,
            fromfile='previous',
            tofile='current',
            lineterm=''
        )
        diff = [
            line for line in diff
            if line.startswith('+') or line.startswith('-')
            if not line.startswith('+++') and not line.startswith('---')
        ]

        diff_content = '\n'.join(diff)
        diff_lines = diff_content.split('\n')

        # è¡Œæ•°ã‚’è¨ˆç®—
        line_count = len(diff_lines)

        return diff_content, line_count
    except Exception as e:
        print(f"å·®åˆ†ã®å–å¾—ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: {e}")
        return None, 0


WAIT_SEC = 5


def main():
    # argparseã§ã‚»ãƒƒã‚·ãƒ§ãƒ³åã¨ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã‚’å—ã‘å–ã‚‹
    parser = argparse.ArgumentParser(
        description='æŒ‡å®šã•ã‚ŒãŸtmuxã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’ç›£è¦–ã—ã€claudeã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚å®Ÿè¡Œä¾‹: clauder <session_name> <command_file_path>')
    parser.add_argument('session_name', help='tmuxã‚»ãƒƒã‚·ãƒ§ãƒ³å')
    parser.add_argument('command_file_path',
                        help='claudeã«é€ä¿¡ã™ã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒå«ã¾ã‚Œã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹')
    args = parser.parse_args()

    # æŒ‡å®šã•ã‚ŒãŸtmuxã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’killã—ã¦æ–°ã—ãèµ·å‹•
    kill_tmux_session(args.session_name)
    start_new_tmux_session(args.session_name, args.command_file_path)

    previous_content = None

    print(f"tmuxã‚»ãƒƒã‚·ãƒ§ãƒ³ '{args.session_name}' ã®ç›£è¦–ã‚’é–‹å§‹...")

    while True:
        try:
            # tmuxãƒšã‚¤ãƒ³ã®å†…å®¹ã‚’ã‚­ãƒ£ãƒ—ãƒãƒ£
            current_content = capture_tmux_pane(args.session_name)

            if current_content is None:
                print("ãƒšã‚¤ãƒ³ã®ã‚­ãƒ£ãƒ—ãƒãƒ£ã«å¤±æ•—ã—ã¾ã—ãŸ")
                time.sleep(WAIT_SEC)
                continue

            # å‰å›ã®å†…å®¹ã¨æ¯”è¼ƒ
            if previous_content is not None and current_content == previous_content:
                print(
                    f"å¤‰æ›´ãŒæ¤œå‡ºã•ã‚Œã¾ã›ã‚“ã§ã—ãŸ {time.strftime('%Y-%m-%d %H:%M:%S')}")
                # æ–°ã—ã„tmuxã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’èµ·å‹•
                kill_tmux_session(args.session_name)
                start_new_tmux_session(
                    args.session_name, args.command_file_path)
            else:
                print(
                    f"å¤‰æ›´ãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸ {time.strftime('%Y-%m-%d %H:%M:%S')}")

                # å·®åˆ†ã‚’å–å¾—
                diff_content, line_count = get_diff_content(
                    previous_content, current_content)
                if diff_content:
                    print(f"å·®åˆ†è¡Œæ•°: {line_count}")
                    if line_count > 0:
                        print("å·®åˆ†å†…å®¹:")
                        print(diff_content)
                else:
                    print("å·®åˆ†ãŒåˆ©ç”¨ã§ãã¾ã›ã‚“")

                previous_content = current_content

            # 5ç§’å¾…æ©Ÿ
            time.sleep(WAIT_SEC)

        except KeyboardInterrupt:
            print("\nãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã‚ˆã£ã¦ç›£è¦–ãŒåœæ­¢ã•ã‚Œã¾ã—ãŸ")
            break
        except Exception as e:
            print(f"äºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼: {e}")
            time.sleep(WAIT_SEC)


if __name__ == "__main__":
    main()
```

### 3. order.txt - AIã¸ã®å‡¦ç†æŒ‡ç¤ºæ›¸

å‚è€ƒã¨ã—ã¦ä»Šå›ç”¨ã„ãŸorder.txtã‚‚è¨˜è¼‰ã—ã¦ãŠãã¾ã™ã€‚ã“ã¡ã‚‰ã‚‚AIã¨å£æ‰“ã¡ã—ã¦ç”Ÿæˆã•ã›ã¦ã„ã¾ã™ã€‚ä½¿é€”ã«å¿œã˜ãŸä»Šã¾ã§é€šã‚Šã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«ã‚¿ã‚¹ã‚¯ç®¡ç†ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã‚’ä½¿ã†ã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã™ã€‚

```markdown
# RSpecãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³åˆ¥åˆ†å‰²æŒ‡ç¤º

ã‚ãªãŸã¯ RSpec ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã”ã¨ã«åˆ†å‰²ã™ã‚‹ä½œæ¥­ã‚’æ‹…å½“ã—ã¾ã™ã€‚

## ä½œæ¥­æ‰‹é †

1. **tasks.txt ã‹ã‚‰1è¡Œç›®ã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã‚’å–å¾—**
   ```bash
   TARGET_FILE=$(head -n 1 tasks.txt)
   echo "å‡¦ç†å¯¾è±¡: $TARGET_FILE"
   ```

2. **tasks.txt ã‹ã‚‰å‡¦ç†æ¸ˆã¿ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤**
   ```bash
   tail -n +2 tasks.txt > tasks_tmp.txt && mv tasks_tmp.txt tasks.txt
   ```

3. **å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«ã®è©³ç´°åˆ†æ**
   - ãƒ•ã‚¡ã‚¤ãƒ«å†…å®¹ã‚’èª­ã¿å–ã‚Š
   - å«ã¾ã‚Œã‚‹ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆindex, show, create, update, destroy, new, editç­‰ï¼‰ã‚’ç‰¹å®š
   - å„ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹æ•°ã‚’ã‚«ã‚¦ãƒ³ãƒˆ

4. **åˆ†å‰²å‰ã®å‹•ä½œç¢ºèª**
   ```bash
   # åˆ†å‰²å‰ã®ãƒ†ã‚¹ãƒˆå®Ÿè¡Œï¼ˆãƒ‘ã‚¹æ•°ã¨ä»¶æ•°ã‚’è¨˜éŒ²ï¼‰
   docker compose exec web bundle exec rspec $TARGET_FILE --format progress
   ```
   - å®Ÿè¡Œçµæœï¼ˆãƒ‘ã‚¹æ•°ã€å¤±æ•—æ•°ã€ç·ä»¶æ•°ï¼‰ã‚’ãƒ¡ãƒ¢

5. **ã‚¢ã‚¯ã‚·ãƒ§ãƒ³åˆ¥ãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²å®Ÿè¡Œ**
   ä¾‹ï¼š`spec/requests/users_spec.rb` â†’ 
   ```
   spec/requests/users/index_spec.rb
   spec/requests/users/show_spec.rb  
   spec/requests/users/create_spec.rb
   spec/requests/users/update_spec.rb
   spec/requests/users/destroy_spec.rb
   ```

6. **åˆ†å‰²å¾Œã®å‹•ä½œç¢ºèª**
   ```bash
   # å„åˆ†å‰²ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
   for file in spec/requests/users/*_spec.rb; do
     echo "Testing: $file"
     docker compose exec web bundle exec rspec "$file" --format progress
   done
   ```
   - åˆ†å‰²å‰å¾Œã§ãƒ†ã‚¹ãƒˆä»¶æ•°ãŒä¸€è‡´ã™ã‚‹ã“ã¨ã‚’ç¢ºèª
   - å…¨ã¦ã®ãƒ†ã‚¹ãƒˆãŒãƒ‘ã‚¹ã™ã‚‹ã“ã¨ã‚’ç¢ºèª

7. **å…ƒãƒ•ã‚¡ã‚¤ãƒ«ã®å‰Šé™¤**
   - åˆ†å‰²å®Œäº†å¾Œã€å…ƒã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤

8. **rubocop & ã‚³ãƒŸãƒƒãƒˆ**
   - docker compose exec web bundle exec rubocop -A "[FILEPATH]"
   - git add [FILEPATH] (å‰Šé™¤ã—ãŸæ–¹ã‚‚git addå¿˜ã‚Œãªã„ã§)
   - git commit -m "test: [FILEPATH]ã‚’ã‚¢ã‚¯ã‚·ãƒ§ãƒ³æ¯ã«ã‚ˆã‚Šãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²"

9. **åˆ†å‰²çµæœã®å ±å‘Š**
   - åˆ†å‰²ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§
   - ãƒ†ã‚¹ãƒˆä»¶æ•°ã®ç¢ºèªçµæœ
   - å‹•ä½œç¢ºèªã®çµæœ

## æ³¨æ„äº‹é …

- **å¿…ãš docs/rspec.md ã®æ–¹é‡ã«å¾“ã£ã¦åˆ†å‰²ã—ã¦ãã ã•ã„**
- **åˆ†å‰²å‰å¾Œã§ãƒ†ã‚¹ãƒˆä»¶æ•°ãŒå¤‰ã‚ã‚‰ãªã„ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„**
- **ã‚³ãƒ¡ãƒ³ãƒˆã‚‚å¿…ãšç§»è¡Œã—ã¦ãã ã•ã„**
- **å…¨ã¦ã®ãƒ†ã‚¹ãƒˆãŒãƒ‘ã‚¹ã™ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„**
- **æ—¥æœ¬èªã§ã®ãƒ†ã‚¹ãƒˆè¨˜è¿°ã‚’ä¿æŒã—ã¦ãã ã•ã„**
- **ãƒ•ã‚¡ã‚¤ãƒ«åã¯ `{controllerå}/{actionå}_spec.rb` ã®å½¢å¼ã«ã—ã¦ãã ã•ã„**

## ã‚¨ãƒ©ãƒ¼å¯¾å¿œ

- ãƒ†ã‚¹ãƒˆå¤±æ•—ãŒã‚ã‚‹å ´åˆã¯ã€åŸå› ã‚’èª¿æŸ»ã—ã¦ä¿®æ­£
- ãƒ†ã‚¹ãƒˆä»¶æ•°ãŒåˆã‚ãªã„å ´åˆã¯ã€åˆ†å‰²ãƒ­ã‚¸ãƒƒã‚¯ã‚’è¦‹ç›´ã—
- ãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚‰ãªã„å ´åˆã¯ã€tasks.txt ã®æ›´æ–°çŠ¶æ³ã‚’ç¢ºèª

## å®Œäº†æ¡ä»¶

1. å…ƒãƒ•ã‚¡ã‚¤ãƒ«ãŒæ­£å¸¸ã«ã‚¢ã‚¯ã‚·ãƒ§ãƒ³åˆ¥ã«åˆ†å‰²ã•ã‚Œã¦ã„ã‚‹
2. åˆ†å‰²å‰å¾Œã§ãƒ†ã‚¹ãƒˆä»¶æ•°ãŒä¸€è‡´ã—ã¦ã„ã‚‹  
3. å…¨ã¦ã®ãƒ†ã‚¹ãƒˆãŒæ­£å¸¸ã«ãƒ‘ã‚¹ã—ã¦ã„ã‚‹
4. tasks.txt ã‹ã‚‰å‡¦ç†æ¸ˆã¿ãƒ•ã‚¡ã‚¤ãƒ«ãŒå‰Šé™¤ã•ã‚Œã¦ã„ã‚‹
5. ã©ã†ã—ã¦ã‚‚rspecãŒè§£æ±ºã§ããªã„ç§»è¡Œä¸å¯ãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã£ãŸã‚‰ã€è©²å½“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯å›å¾©ã€æ–°ãƒ•ã‚¡ã‚¤ãƒ«ã¯å‰Šé™¤ã—ã¦ã€tasks.errors.txtã«è¿½è¨˜ã—ã¦tasks.txtã‹ã‚‰ã¯é™¤å»ã—ã¦ãŠã„ã¦ãã ã•ã„ã€‚

**1ã¤ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®åˆ†å‰²ãŒå®Œäº†ã—ãŸã‚‰ä½œæ¥­çµ‚äº†ã€‚æ¬¡ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯åˆ¥ã®AIã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒå‡¦ç†ã—ã¾ã™ã€‚**
```

### 4. tasks.txt - å‡¦ç†å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«ãƒªã‚¹ãƒˆ

ä»Šå›ã¯ãƒ•ã‚¡ã‚¤ãƒ«åã§ã™ãŒã€URLã§ã‚ã£ãŸã‚Šã‚¿ã‚¹ã‚¯ã«å¿œã˜ãŸè‡ªç”±ãªæ–‡å­—åˆ—ã®ãƒªã‚¹ãƒˆã§ã‚‚å‹¿è«–å¯ã§ã™ã€‚

```
spec/requests/users_spec.rb
spec/requests/cards_spec.rb
...ä¸­ç•¥...
```

## ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ / æœ€çŸ­æ‰‹é †

### 1. å¿…è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ã®æº–å‚™

```bash
# .zshrcã«é–¢æ•°ã‚’è¿½åŠ 
echo 'function clauder() {
  local SESSION_NAME=$1
  local COMMAND_FILE_PATH=$2
  python ~/.repeat_tmux.py $SESSION_NAME $COMMAND_FILE_PATH
}' >> ~/.zshrc

# Pythonã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’é…ç½®
cp .repeat_tmux.py ~/

# å‡¦ç†å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«ãƒªã‚¹ãƒˆã‚’ä½œæˆ
AIã«æŠ½å‡ºã•ã›ã¾ã™

# æŒ‡ç¤ºæ›¸ã‚’ä½œæˆï¼ˆorder.txtã®å†…å®¹ã‚’ã‚³ãƒ”ãƒ¼ï¼‰
```

### 2. å®Ÿè¡Œ

sessionåã‚’æ˜ç¤ºã™ã‚‹ã“ã¨ã§tmuxã‚’ä»–ã®ç”¨é€”(åˆ¥ä»¶ã®clauderãªã©)ã§ã‚‚ä½¿ãˆã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚

```bash
clauder split-rspec order.txt
```

## å®Ÿè£…ã®è¦ç‚¹

### ç›£è¦–ãƒ¡ã‚«ãƒ‹ã‚ºãƒ ã®å®Ÿè£…

ï¼•ç§’æ¯ã«Claude Codeã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’ã‚­ãƒ£ãƒ—ãƒãƒ£ã—ã¦ç§’æ•°ã€ãƒˆãƒ¼ã‚¯ãƒ³æ•°ãªã©å«ã‚æç”»ã®æ›´æ–°ãŒä¸€åˆ‡ã‚¹ãƒˆãƒƒãƒ—ã—ã¦ã„ãŸã‚‰ä½œæ¥­ãŒåœæ­¢ã—ãŸè¦‹ãªã—å†èµ·å‹•ã—ã¾ã™ã€‚

```python
# 5ç§’ã”ã¨ã«å‡ºåŠ›ã‚’ãƒã‚§ãƒƒã‚¯
if previous_content is not None and current_content == previous_content:
    print(f"å¤‰æ›´ãŒæ¤œå‡ºã•ã‚Œã¾ã›ã‚“ã§ã—ãŸ {time.strftime('%Y-%m-%d %H:%M:%S')}")
    # å¤‰æ›´ãŒãªã„å ´åˆã¯è‡ªå‹•å†èµ·å‹•
    kill_tmux_session(args.session_name)
    start_new_tmux_session(args.session_name, args.command_file_path)
```

ã“ã®ã‚·ãƒ³ãƒ—ãƒ«ãªä»•çµ„ã¿ã«ã‚ˆã‚Šã€Claude CodeãŒåœæ­¢ã—ãŸå ´åˆã§ã‚‚è‡ªå‹•çš„ã«å†èµ·å‹•ã•ã‚Œã¾ã™ã€‚

### ã‚¿ã‚¹ã‚¯ã‚­ãƒ¥ãƒ¼ã®å®Ÿè£…

```bash
# 1è¡Œç›®ã‚’å–å¾—ã—ã¦å‡¦ç†
TARGET_FILE=$(head -n 1 tasks.txt)

# å‡¦ç†å¾Œã«1è¡Œç›®ã‚’å‰Šé™¤
tail -n +2 tasks.txt > tasks_tmp.txt && mv tasks_tmp.txt tasks.txt
```

### æŒ‡ç¤ºã®é€”ä¸­å¤‰æ›´

å‡¦ç†ãŒé–‹å§‹ã™ã‚‹ã¨ã€åˆæœŸã®order.txtãŒã‚‚ãŸã‚‰ã—ãŸå®Ÿè¡Œçµæœã¸ã®ä¸æº€ãŒã‚ã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚ãã®éš›ã¯å®Ÿè¡Œä¸­ã§ã‚‚å¾Œè¿°ã™ã‚‹order.txtã‚’ä¿®æ­£ã—ãŸã‚Šgitã‚³ãƒãƒ³ãƒ‰ã§ç·¨é›†ã‚’å–ã‚Šæ¶ˆã—ã¦tasks.txtã«æ¶ˆãˆãŸãƒ•ã‚¡ã‚¤ãƒ«åã‚’ç©ã‚“ã§å†ã‚¿ã‚¹ã‚¯åŒ–ãªã©ã™ã‚‹ã“ã¨ã§æ¬¡ã‹ã‚‰ã¯æ”¹å–„ã•ã‚ŒãŸãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§å®Ÿè¡ŒãŒç¶™ç¶šã—ã¾ã™ã€‚

## ã¾ã¨ã‚

Claude Codeã‚’24æ™‚é–“ç¨¼åƒã•ã›ã‚‹ä»•çµ„ã¿ã‚’æ§‹ç¯‰ã™ã‚‹ã“ã¨ã§ã€å¤§è¦æ¨¡ãªã‚³ãƒ¼ãƒ‰ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã‚’è‡ªå‹•åŒ–ã§ãã¾ã—ãŸã€‚
